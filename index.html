<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨ƒèè³‡æ–™</title>
    <link rel="stylesheet" href="invitation.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">
</head>
<body>
    <header>
        <img src="image/logo.png" alt="ç¥¥å®‰ç”Ÿå‘½æœ‰é™å…¬å¸ Logo" class="logo">
    </header>
    <main>
        <section id="main-photo-section">
            <h2>ä¸»ç…§ç‰‡</h2>
            <img id="main-photo" alt="ä¸»ç…§ç‰‡">
        </section>

        <section id="additional-photos-section">
            <h2>å…¶ä»–ç…§ç‰‡</h2>
            <div class="carousel" id="additional-photos"></div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 ç¥¥å®‰ç”Ÿå‘½æœ‰é™å…¬å¸. ç‰ˆæ¬Šæ‰€æœ‰.</p>
    </footer>
    <audio id="background-music" loop>
        <source src="audio/default-music.mp3" type="audio/mp3">
        æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒéŸ³é »å…ƒç´ ã€‚
    </audio>
    <button id="play-music">ğŸ”Š</button>
    <button id="stop-music" style="display: none;">ğŸ”‡</button>

    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainPhoto = document.getElementById('main-photo');
            const additionalPhotosContainer = document.getElementById('additional-photos');
            const backgroundMusic = document.getElementById('background-music');
            const playMusicButton = document.getElementById('play-music');
            const stopMusicButton = document.getElementById('stop-music');

            // è¯»å–å¹¶æ˜¾ç¤ºä¸»ç…§ç‰‡
            const mainPhotoUrl = localStorage.getItem('mainPhoto');
            if (mainPhotoUrl) {
                mainPhoto.src = mainPhotoUrl;
            }

            // è¯»å–å¹¶æ˜¾ç¤ºé™„åŠ ç…§ç‰‡
            const additionalPhotos = JSON.parse(localStorage.getItem('additionalPhotos')) || [];
            additionalPhotos.forEach(photoDataUrl => {
                const img = document.createElement('img');
                img.src = photoDataUrl;
                additionalPhotosContainer.appendChild(img);
            });

            // åˆå§‹åŒ– Slick Carousel
            $('.carousel').slick({
                dots: true,
                infinite: true,
                speed: 500,
                slidesToShow: 1,
                slidesToScroll: 1
            });

            // æ’­æ”¾éŸ³ä¹
            playMusicButton.addEventListener('click', () => {
                backgroundMusic.play().catch(error => console.error("æ’­æ”¾èƒŒæ™¯éŸ³ä¹å¤±è´¥", error));
                playMusicButton.style.display = 'none';
                stopMusicButton.style.display = 'inline';
            });

            // åœæ­¢éŸ³ä¹
            stopMusicButton.addEventListener('click', () => {
                backgroundMusic.pause();
                playMusicButton.style.display = 'inline';
                stopMusicButton.style.display = 'none';
            });

            // éŸ³ä¹æ’­æ”¾æ§åˆ¶
            function loadStoredSettings() {
                const storedMusicUrl = localStorage.getItem('musicUrl');
                const isMusicPlaying = localStorage.getItem('musicPlaying') === 'true';

                if (storedMusicUrl) {
                    backgroundMusic.src = storedMusicUrl;
                    if (isMusicPlaying) {
                        backgroundMusic.play().catch(error => {
                            console.error("æ’­æ”¾èƒŒæ™¯éŸ³ä¹å¤±è´¥:", error);
                        });
                        playMusicButton.style.display = 'none';
                        stopMusicButton.style.display = 'inline';
                    }
                }
            }

            loadStoredSettings();
        });
    </script>
</body>
</html>
