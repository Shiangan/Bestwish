<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>祥安生命有限公司－雲端訃聞</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <img src="標準字LOGO標準色.jpg" alt="祥安生命有限公司 Logo" class="logo">
        <h1>雲端訃聞</h1>
    </header>

    <main>
        <section id="deceased-info">
            <h2>往生者資料</h2>
            <form id="deceased-form">
                <label for="name">姓名:</label>
                <input type="text" id="name" name="name" required>

                <label for="photo">追思照片:</label>
                <input type="file" id="photo" name="photo" accept="image/*" required>
                <div id="photo-preview"></div>

                <label for="additional-photos">其他照片（可選）:</label>
                <input type="file" id="additional-photos" name="additional-photos" accept="image/*" multiple>
                <div id="additional-photos-preview"></div>

                <label for="birth-date">出生日期:</label>
                <input type="date" id="birth-date" name="birth-date" required>

                <label for="death-date">死亡日期:</label>
                <input type="date" id="death-date" name="death-date" required>

                <label for="funeral-space">牌位安置地點:</label>
                <textarea id="funeral-space" name="funeral-space"></textarea>

                <label for="funeral-date">出殯日期:</label>
                <input type="date" id="funeral-date" name="funeral-date" required>

                <label for="funeral-location">出殯地點:</label>
                <select id="funeral-location" name="funeral-location" required>
                    <option value="第二殯儀館">第二殯儀館 禮廳</option>
                    <option value="板橋殯儀館">板橋殯儀館 禮廳</option>
                    <option value="其他">其他</option>
                </select>
                <input type="text" id="other-funeral-location" name="other-funeral-location" placeholder="若選擇其他，請填寫地點">

                <label for="family-service-time">家奠禮時間:</label>
                <input type="time" id="family-service-time" name="family-service-time" required>

                <label for="public-service-time">公奠禮時間:</label>
                <input type="time" id="public-service-time" name="public-service-time" required>

                <label for="life-story">生平介紹:</label>
                <textarea id="life-story" name="life-story"></textarea>

                <label for="music-choice">選擇背景音樂:</label>
                <select id="music-choice" name="music-choice" required>
                    <option value="music1.mp3">音樂1</option>
                    <option value="music2.mp3">音樂2</option>
                    <option value="music3.mp3">音樂3</option>
                    <option value="music4.mp3">音樂4</option>
                    <option value="music5.mp3">音樂5</option>
                </select>

                <button type="submit">提交</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 祥安生命有限公司. 版權所有.</p>
    </footer>

    <script>
        document.getElementById('photo').addEventListener('change', function(event) {
            const photoPreview = document.getElementById('photo-preview');
            photoPreview.innerHTML = '';
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.alt = '追思照片預覽';
                    img.style.maxWidth = '200px';
                    photoPreview.appendChild(img);
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('additional-photos').addEventListener('change', function(event) {
            const additionalPhotosPreview = document.getElementById('additional-photos-preview');
            additionalPhotosPreview.innerHTML = '';
            const files = event.target.files;
            for (let i = 0; i < files.length; i++) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.alt = '其他照片預覽';
                    img.style.maxWidth = '100px';
                    additionalPhotosPreview.appendChild(img);
                };
                reader.readAsDataURL(files[i]);
            }
        });
        document.getElementById('deceased-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const jsonData = {};
            formData.forEach((value, key) => {
                jsonData[key] = value;
            });
            localStorage.setItem('obituaryData', JSON.stringify(jsonData));
            window.location.href = 'obituary.html';
        });
    </script>
</body>
</html>
